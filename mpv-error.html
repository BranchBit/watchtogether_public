<!-- mpv-error.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>MPV Error</title>
</head>
<body style="font-family:sans-serif;background:#111;color:#fff;padding:20px;">
<h2>MPV Not Found</h2>
<button id="install">Install MPV Automatically</button>
<pre id="log" style="background:#000;padding:10px;color:#0f0;overflow:auto;height:200px;margin-top:10px;"></pre>

<script>
    const { ipcRenderer } = require("electron");

    document.getElementById("install").onclick = () => {
        document.getElementById("log").textContent = "Starting installation...\n";
        ipcRenderer.invoke("install-mpv");
    };

    ipcRenderer.on("installer-log", (_, msg) => {
        const log = document.getElementById("log");
        log.textContent += msg;
        log.scrollTop = log.scrollHeight;
    });

    window.onerror = (msg, src, lineno, colno, error) => {
        const log = document.getElementById("log");
        log.textContent += `\nJS Error: ${msg} at ${lineno}:${colno}\n`;
    };
</script>
</body>
</html>
